<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="awaken_ing">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
<link href='/assets/stylesheets/bootstrap.min-cda5ce8bd759b8186e71e4929410abbf.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/style-e81fa375b231bedf6cb2dbc6653570cc.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/google_prettify/sons-of-obsidian-afb0925bfa2d994f17dab93e13fbf999.css' type='text/css' rel='stylesheet' media='all'>
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">HOMEPAGE</a>
          <ul class="nav">
              
                <li><a href="/archive">Archive</a></li>
              
              
                <li><a href="/tags">Tags</a></li>
              
              
                <li><a href="/categories">Categories</a></li>
              
              
                <li><a href="/pages">Pages</a></li>
              
              
                <li><a href="/about-me">About Me</a></li>
              
          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        <div class="row-fluid">
  <div class="span12">
      <div class="posts">
        <h3 class="title"><a href="/posts/flush_dcache_page">flush_dcache_page</a> <span class="date">2016-12-31</span></h3>

        <div class="summary ellipsis">
<h1 id="toc_0"><h4>1. flush_dcache_page的实现</h4></h1>

<p>问题:flush_dcache_page()到底是 invalid, 还是 clean and invalid, 还是仅清掉dirty bit</p>

<p>linux-3.10.86/arch/arm/mm/flush.c</p>

<pre><code>flush_dcache_page -&gt; __flush_dcache_page
{
    /*
     * Writeback ...
    */

}
</code></pre>

<p>是Writeback, 所以, 可以理解为 clean and invalid, 尽管实现上可能采用lazy什么的.</p>

<h1 id="toc_1"><h4>2. 读写中的使用</h4></h1>

<p>linux-3.10.86/mm/filemap.c</p>

</div>

        <div class="more">
          <a href="/posts/flush_dcache_page" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="posts">
        <h3 class="title"><a href="/posts/arm_asm">ARM的一些汇编</a> <span class="date">2016-12-31</span></h3>

        <div class="summary ellipsis">
<h1 id="toc_0"><h4>1. ^后缀</h4></h1>

<p>ARM ® Developer Suite Version 1.2 Assembler Guide P128  </p>

<blockquote>
<p>4.2.4 LDM and STM<br>
^ is an optional suffix. You must not use it in User mode or System mode.<br>
It has two purposes:<br>
    • If op is LDM and reglist contains the pc (r15), in addition to the normal multiple register transfer, the SPSR is copied into the CPSR. This is for returning from exception handlers. Use this only from exception modes.<br>
    • Otherwise, data is transferred into or out of the User mode registers instead of the current mode registers.  </p>
</blockquote>

<p>例如</p>

<ul>
<li><p>只有当pop/LDM列表中有pc时, 才会cpsr:=spsr.
例 <code>ldmia sp,{r0-pc}^</code>
这里^表示 将spsr复制到cpsr.</p></li>
<li><p><code>stmdb   r0, {sp, lr}^</code>
这里^表示访问的是usr 模式下的寄存器</p></li>
</ul>

</div>

        <div class="more">
          <a href="/posts/arm_asm" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="posts">
        <h3 class="title"><a href="/posts/set_buffer_new">set_buffer_new</a> <span class="date">2016-12-31</span></h3>

        <div class="summary">
本文主要解释BH_New的含义, 以及何时设置该标志.
</div>

        <div class="more">
          <a href="/posts/set_buffer_new" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="posts">
        <h3 class="title"><a href="/posts/read_write_lock_page">读写函数中的lock_page</a> <span class="date">2016-12-30</span></h3>

        <div class="summary">
do_generic_file_read和generic_perform_write中对锁的处理.  <br>  
从磁盘读到RAM中的过程中, page需要处于lock状态.  <br>
把用户的数据拷贝到page cahe, 该过程也要处理好lock page问题.
</div>

        <div class="more">
          <a href="/posts/read_write_lock_page" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="posts">
        <h3 class="title"><a href="/posts/ext2_layout">ext2 disk layout</a> <span class="date">2016-12-30</span></h3>

        <div class="summary">
主要为了验证对ext2的 Disk Organization的理解, 诸如Block Group Descriptor, Inode Table之类.<br>

给定一个ext2镜像, 遍历其所有文件, 并显示文件内容.<br>

假定该镜像的文件大小都比较小, 不需要indirect pointer.
</div>

        <div class="more">
          <a href="/posts/ext2_layout" class="btn btn-small">read more..</a>
        </div>
      </div>
    
    <div class="pagination">
      <ul>
          <li><a href="/posts/index/1">1</a></li>
          <li class="active"><a href="/posts/index/2">2</a></li>
          <li><a href="/posts/index/3">3</a></li>
      </ul>
    </div>
  </div>
</div>

      </div>

      <hr>
      <div class="footer">
        <p> Published with <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </div>

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    
    
  </body>
</html>
